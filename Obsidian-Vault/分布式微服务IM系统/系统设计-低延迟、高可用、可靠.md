## 1 功能

- 添加好友
- 聊天会话列表
- 单聊
- 群聊（聊天室）
- 消息漫游
- 消息已读/未读

## 2 约束

 1. DAU（日活）
    - QPS
    - 消息存储
    - 峰值预估
2. 可靠性
3. 延迟
4. 消息时序一致性（不重不漏、不换顺序）
5. 万人群聊（消息风暴，刷屏）
6. 可运维性

## 3 可行解

## 4 更优解

1. 长连接（ws、tcp）
2.  路由服务 uid->instanceid
